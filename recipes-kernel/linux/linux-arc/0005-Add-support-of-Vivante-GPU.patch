From dfa54487a974c8d0e57a7626d252fcd948f52151 Mon Sep 17 00:00:00 2001
From: Evgeniy Didin <Evgeniy.Didin@synopsys.com>
Date: Wed, 10 Oct 2018 19:20:24 +0300
Subject: [PATCH 5/5] Add support of Vivante GPU

Signed-off-by: Evgeniy Didin <Evgeniy.Didin@synopsys.com>
---
 arch/arc/boot/dts/hsdk.dts      | 5 +++++
 arch/arc/configs/hsdk_defconfig | 3 +--
 2 files changed, 6 insertions(+), 2 deletions(-)

diff --git a/arch/arc/boot/dts/hsdk.dts b/arch/arc/boot/dts/hsdk.dts
index 006aa3de5348..f23c4e5b4ff9 100644
--- a/arch/arc/boot/dts/hsdk.dts
+++ b/arch/arc/boot/dts/hsdk.dts
@@ -213,6 +213,11 @@
 			interrupts = <12>;
 			bus-width = <4>;
 		};
+               gpu_3d: gpu@90000 {
+                      compatible = "vivante,gc";
+                      reg = <0x90000 0x4000>;
+                      interrupts = <28>;
+               };
 	};
 
 	memory@80000000 {
diff --git a/arch/arc/configs/hsdk_defconfig b/arch/arc/configs/hsdk_defconfig
index 6491be0ddbc9..c5b392ec1146 100644
--- a/arch/arc/configs/hsdk_defconfig
+++ b/arch/arc/configs/hsdk_defconfig
@@ -50,6 +50,7 @@ CONFIG_SERIAL_OF_PLATFORM=y
 CONFIG_DRM=y
 # CONFIG_DRM_FBDEV_EMULATION is not set
 CONFIG_DRM_UDL=y
+CONFIG_DRM_ETNAVIV=y
 CONFIG_FB=y
 CONFIG_FRAMEBUFFER_CONSOLE=y
 CONFIG_USB_EHCI_HCD=y
@@ -61,10 +62,8 @@ CONFIG_MMC=y
 CONFIG_MMC_SDHCI=y
 CONFIG_MMC_SDHCI_PLTFM=y
 CONFIG_MMC_DW=y
-# CONFIG_IOMMU_SUPPORT is not set
 CONFIG_EXT3_FS=y
 CONFIG_VFAT_FS=y
-CONFIG_TMPFS=y
 CONFIG_NFS_FS=y
 CONFIG_NLS_CODEPAGE_437=y
 CONFIG_NLS_ISO8859_1=y
-- 
2.16.2

